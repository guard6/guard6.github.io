<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŸ CP ì†Œí†µë°© ê¶ê·¹ì˜ í™ë³´ ê²Œì‹œíŒ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

    <style>
        /* [ë‹¤ìŒ ì„¹ì…˜ì˜ CSS ì½”ë“œë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”] */
    </style>
</head>
<body>
    <header>
        <h1 class="title">CP ì†Œí†µë°© ê¶ê·¹ì˜ í™ë³´ ê²Œì‹œíŒ ğŸš€</h1>
        <p class="subtitle">ì‹¤ì‹œê°„ ê²€ìƒ‰, ì •ë ¬ ê¸°ëŠ¥ì´ íƒ‘ì¬ëœ ê³ ê¸‰ í™ë³´ë¬¼ ëª©ë¡ì…ë‹ˆë‹¤.</p>
    </header>

    <div class="main-content">
        <div class="registration-banner">
            <h2>ğŸ“¢ ë‚´ í™ë³´ë¬¼ì„ ë“±ë¡í•˜ê³  ì‹¶ë‹¤ë©´?</h2>
            <p>ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì†Œí†µë°©ì— ì ‘ì†í•œ í›„, ì±—ë´‡ì—ê²Œ **!í…ŒìŠ¤íŠ¸ [ë‚´ìš©]**ì„ ì…ë ¥í•˜ë©´ ë°”ë¡œ ë“±ë¡ë©ë‹ˆë‹¤!</p>
            <a href="ì—¬ê¸°ì—_í™ë³´ë¬¼_ë“±ë¡ìš©_ì¹´ì¹´ì˜¤í†¡_ì˜¤í”ˆì±„íŒ…_ë§í¬ë¥¼_ë„£ìœ¼ì„¸ìš”" target="_blank">
                âœ… í™ë³´ë¬¼ ë“±ë¡ë°© ë°”ë¡œê°€ê¸°
            </a>
        </div>
        
        <div class="controls-container">
            <input type="text" id="search-input" placeholder="ì œëª©ì´ë‚˜ ë‚´ìš©ìœ¼ë¡œ ê²€ìƒ‰..." class="search-box">
            <select id="sort-select" class="sort-dropdown">
                <option value="time_desc">ìµœì‹ ìˆœ (ê¸°ë³¸)</option>
                <option value="time_asc">ì˜¤ë˜ëœìˆœ</option>
                <option value="name_asc">ì‘ì„±ììˆœ</option>
            </select>
        </div>

        <div id="loading" class="loading-spinner"></div>
        
        <div id="promo-list" class="promo-container">
            </div>

        <h2 class="section-title">ğŸ† ê¸ˆì£¼ì˜ ì¶”ì²œ í™ë³´ë¬¼ (ê³ ì •)</h2>
        <div class="promo-container manual-promos">
            
            <div class="promo-item">
                <h3>ğŸš— ì°¨ëŸ‰ íŒë§¤ì¤‘! (ë¶„ë…¸ì˜ ì§ˆì£¼ ë“±)</h3>
                <p>â­ï¸ì•„ë°˜ë–¼N ë“± êµ­ì‚°ì°¨ëŸ‰, VIP ì„¸ë‹¨, ì•½ 80ëŒ€ì˜ ë°ì¹¼ ì°¨ëŸ‰ íŒë§¤. (5,000â‚©~20,000â‚©)</p>
                <p class="warning">ì£¼ì˜: ì¹´íŒë¨¸ë‹ˆ, ì°¨êµëŠ” ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
                <a href="https://open.kakao.com/me/ONCOMPANY" target="_blank">ğ‘¶ğ‘±ì»´í¼ë‹ˆ ì „ì‹œìƒµ ë°”ë¡œê°€ê¸°</a>
            </div>
            
            <div class="promo-item">
                <h3>ğŸ”¥ ì¹´ë§ˆë¡œ ë¡œê³ ì‘ ì¶œì‹œ!</h3>
                <p>ìƒˆë¡œìš´ ì¹´ë§ˆë¡œ ë¡œê³  ë””ìì¸ì„ í™•ì¸í•˜ì„¸ìš”. ìì„¸í•œ ë‚´ìš©ì€ ì˜¤í”ˆ ì±„íŒ…ë°©ì—ì„œ ì•ˆë‚´í•´ ë“œë¦½ë‹ˆë‹¤.</p>
                <a href="https://open.kakao.com/o/spy1vNAh" target="_blank">ë¬¸ì˜/ìƒë‹´ ì˜¤í”ˆ ì±„íŒ…ë°© ë°”ë¡œê°€ê¸°</a>
            </div>
            
        </div>
        
    </div>

    </body>
</html>
/* --- ê¸°ë³¸ ì„¤ì • ë° í°íŠ¸ --- */
:root {
    --bg-dark: #2C2F33;
    --bg-card: #2F3136;
    --bg-container: #36393F;
    --color-primary: #7289DA;
    --color-success: #43B581;
    --color-text: #DCDDDE;
    --color-light-text: #B9BBBE;
}

body {
    font-family: 'Noto Sans KR', sans-serif;
    text-align: center;
    padding: 0;
    background-color: var(--bg-dark);
    color: var(--color-text);
    margin: 0;
}

header {
    background-color: #23272A; /* í—¤ë” ë°°ê²½ì„ ë” ì–´ë‘¡ê²Œ */
    padding: 30px 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.title {
    font-size: 2.8em;
    color: #FFFFFF;
    font-weight: 700;
}

.subtitle {
    font-size: 1.1em;
    color: var(--color-light-text);
}

.main-content {
    max-width: 1240px;
    margin: 0 auto;
    padding: 0 20px;
}

.section-title {
    color: var(--color-primary);
    border-bottom: 2px solid #4F545C;
    padding-bottom: 10px;
    margin-top: 40px;
    margin-bottom: 20px;
    text-align: left;
    font-size: 1.6em;
}

/* --- ë“±ë¡ ìœ ë„ ë°°ë„ˆ --- */
.registration-banner {
    background-color: var(--color-primary);
    color: #FFFFFF;
    padding: 25px;
    border-radius: 8px;
    margin-bottom: 40px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.registration-banner h2 {
    font-size: 1.5em;
    margin: 0 0 10px 0;
    border-bottom: none;
}

.registration-banner p {
    margin-bottom: 20px;
}

.registration-banner a {
    display: inline-block;
    background-color: var(--color-success);
    padding: 10px 25px;
    border-radius: 4px;
    font-weight: bold;
    text-decoration: none;
    color: #FFFFFF;
    transition: background-color 0.3s;
}

.registration-banner a:hover {
    background-color: #37956B;
}


/* --- ê²€ìƒ‰ ë° ì •ë ¬ ì»¨íŠ¸ë¡¤ --- */
.controls-container {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    margin-bottom: 30px;
}

.search-box, .sort-dropdown {
    padding: 10px 15px;
    border-radius: 6px;
    border: 1px solid #4F545C;
    background-color: var(--bg-card);
    color: var(--color-text);
    font-size: 1em;
    transition: border-color 0.3s;
}

.search-box:focus, .sort-dropdown:focus {
    border-color: var(--color-primary);
    outline: none;
}

.search-box {
    flex-grow: 1;
}

/* --- í™ë³´ë¬¼ ì»¨í…Œì´ë„ˆ (Flex Grid) --- */
.promo-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: flex-start;
}

/* --- ê°œë³„ í™ë³´ë¬¼ ì¹´ë“œ ìŠ¤íƒ€ì¼ --- */
.promo-item {
    /* PC: 3ê°œì”© ë°°ì¹˜ */
    flex: 1 1 350px; 
    min-width: 350px; 
    max-width: calc(33.33% - 20px); 
    
    background-color: var(--bg-card); 
    padding: 20px;
    border-radius: 10px;
    border-left: 5px solid var(--color-success); 
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s, box-shadow 0.3s, background-color 0.3s;
    text-align: left;
    
    /* ì¹´ë“œ ë‚´ì—ì„œ ë²„íŠ¼ì„ í•˜ë‹¨ì— ë¶™ì´ê¸° ìœ„í•œ ì„¤ì • */
    display: flex;
    flex-direction: column;
}

.promo-item:hover {
    transform: translateY(-5px); /* í˜¸ë²„ ì‹œ ì•½ê°„ ëœ¸ */
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    background-color: #393C41; 
}

.promo-item h3 {
    margin-top: 0;
    color: #FFFFFF;
    font-size: 1.4em;
    margin-bottom: 10px;
}

.promo-item .metadata {
    font-size: 0.8em;
    color: var(--color-light-text);
    margin-bottom: 10px;
}

.promo-item p {
    color: var(--color-light-text);
    font-size: 1em;
    margin-bottom: 15px;
    /* ë‚´ìš©ì´ ê¸¸ ê²½ìš° ìë™ìœ¼ë¡œ ìŠ¤í¬ë¡¤ë°”ê°€ ìƒê¸°ë„ë¡ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤ (ì„ íƒ ì‚¬í•­) */
    /* max-height: 100px; overflow-y: auto; */
    flex-grow: 1; /* ë‚´ìš©ì´ ë²„íŠ¼ ìœ„ì— ë¶™ë„ë¡ ê³µê°„ì„ ì±„ì›€ */
}

/* --- ë§í¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ --- */
.promo-item a {
    display: block; 
    text-align: center;
    color: #FFFFFF;
    text-decoration: none;
    font-weight: bold;
    background-color: var(--color-primary); 
    padding: 10px 15px; 
    border-radius: 6px;
    transition: background-color 0.3s;
    margin-top: auto; /* ë²„íŠ¼ì´ í•­ìƒ ì¹´ë“œ í•˜ë‹¨ì— ë¶™ë„ë¡ í•¨ */
}

.promo-item a:hover {
    background-color: #677BC4; 
}

.warning { color: #F04747; font-weight: bold; margin-top: 5px; }


/* --- ë¡œë”© ìŠ¤í”¼ë„ˆ --- */
.loading-spinner {
    border: 4px solid #f3f3f3;
    border-top: 4px solid var(--color-primary);
    border-radius: 50%;
    width: 30px;
    height: 30px;
    animation: spin 1s linear infinite;
    margin: 50px auto;
    display: block; /* ê¸°ë³¸ì€ í‘œì‹œ */
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ ë©”ì‹œì§€ */
.no-results {
    width: 100%;
    text-align: center;
    color: var(--color-light-text);
    padding: 50px;
    font-size: 1.2em;
}

/* --- 3. ëª¨ë°”ì¼ ìµœì í™” (768px ì´í•˜) --- */
@media (max-width: 768px) {
    .main-content {
        padding: 0 10px;
    }
    
    .title {
        font-size: 2em;
    }
    
    .controls-container {
        flex-direction: column; /* ëª¨ë°”ì¼ì—ì„œ ê²€ìƒ‰/ì •ë ¬ì„ ì„¸ë¡œë¡œ ë°°ì¹˜ */
        gap: 10px;
    }
    
    .search-box, .sort-dropdown {
        width: 100%;
        box-sizing: border-box; /* íŒ¨ë”©ì´ í­ì— í¬í•¨ë˜ë„ë¡ */
    }

    .promo-item {
        /* ëª¨ë°”ì¼ì—ì„œ 1ê°œì”© ì„¸ë¡œë¡œ ìŒ“ì´ë„ë¡ 100% í­ ì„¤ì • */
        flex: 1 1 100%; 
        min-width: 100%; 
        max-width: 100%; 
        padding: 15px;
    }
}
<script>
    // ğŸš¨ 1. ì¤‘ìš”: ì—¬ê¸°ì— ë³¸ì¸ì˜ Firebase ì„¤ì • ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”! ğŸš¨
    const firebaseConfig = {
        apiKey: "YOUR_API_KEY", 
        authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
        databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "YOUR_PROJECT_ID",
    };
    
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    
    const promoListElement = document.getElementById('promo-list');
    const loadingSpinner = document.getElementById('loading');
    const searchInput = document.getElementById('search-input');
    const sortSelect = document.getElementById('sort-select');
    
    let allPromos = []; // ëª¨ë“  í™ë³´ë¬¼ ë°ì´í„°ë¥¼ ì €ì¥í•  ë°°ì—´
    
    // --- 2. ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (Firebase) ---
    function fetchPromos() {
        loadingSpinner.style.display = 'block'; // ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ
        promoListElement.innerHTML = '';
        
        // Firebaseì—ì„œ ëª¨ë“  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
        database.ref('promos').once('value', (snapshot) => {
            const data = [];
            snapshot.forEach((childSnapshot) => {
                const promo = childSnapshot.val();
                data.push(promo);
            });
            
            allPromos = data;
            
            // ë°ì´í„° ë¡œë“œ í›„ í•„í„°ë§ ë° ë Œë”ë§ ì‹œì‘
            filterAndRenderPromos(); 
            loadingSpinner.style.display = 'none'; // ë¡œë”© ìŠ¤í”¼ë„ˆ ìˆ¨ê¸°ê¸°
            
        }, (error) => {
            loadingSpinner.style.display = 'none';
            promoListElement.innerHTML = `<div class="no-results">ğŸš¨ ë°ì´í„° ë¡œë”© ì˜¤ë¥˜: ${error.message}</div>`;
        });
    }

    // --- 3. ë°ì´í„° ì •ë ¬ ---
    function sortPromos(promos) {
        const sortValue = sortSelect.value; // í˜„ì¬ ì„ íƒëœ ì •ë ¬ ê¸°ì¤€
        const [key, direction] = sortValue.split('_');

        promos.sort((a, b) => {
            let comparison = 0;
            
            if (key === 'time') {
                // ì‹œê°„ì€ ë‚´ë¦¼ì°¨ìˆœ(desc: ìµœì‹ ìˆœ)ì´ ê¸°ë³¸
                comparison = a.time - b.time; 
            } else if (key === 'name') {
                // ì´ë¦„ì€ ì˜¤ë¦„ì°¨ìˆœ(asc: ã„±ã„´ã„·ìˆœ)ì´ ê¸°ë³¸
                const nameA = a.name.toUpperCase();
                const nameB = b.name.toUpperCase();
                if (nameA > nameB) comparison = 1;
                else if (nameA < nameB) comparison = -1;
            }
            
            // directionì´ desc(ë‚´ë¦¼ì°¨ìˆœ)ì´ë©´ ê²°ê³¼ë¥¼ ë°˜ì „ì‹œí‚µë‹ˆë‹¤.
            return direction === 'asc' ? comparison : comparison * -1;
        });
        return promos;
    }

    // --- 4. HTML ë Œë”ë§ (í™”ë©´ì— í‘œì‹œ) ---
    function renderPromos(promosToRender) {
        promoListElement.innerHTML = '';
        
        if (promosToRender.length === 0) {
            promoListElement.innerHTML = `<div class="no-results">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>`;
            return;
        }

        promosToRender.forEach((promo) => {
            const contentWithBreaks = (promo.content || '').replace(/\n/g, '<br>');
            const linkButton = promo.link 
                ? `<a href="${promo.link}" target="_blank">ìì„¸íˆ ë³´ê¸° / ë¬¸ì˜í•˜ê¸°</a>` 
                : '';
            
            // ì‹œê°„ í¬ë§·íŒ… (ë” ê¹”ë”í•˜ê²Œ)
            const date = new Date(promo.time);
            const formattedDate = date.toLocaleDateString('ko-KR', { 
                year: 'numeric', month: '2-digit', day: '2-digit', 
                hour: '2-digit', minute: '2-digit' 
            });

            const promoHtml = `
                <div class="promo-item">
                    <h3>${promo.title || 'ì œëª© ì—†ìŒ'}</h3>
                    <div class="metadata">
                        <span>ì‘ì„±ì: ${promo.name || 'ìµëª…'}</span> | 
                        <span>ë“±ë¡ì¼: ${formattedDate}</span>
                    </div>
                    <p>${contentWithBreaks}</p>
                    ${linkButton}
                </div>
            `;
            promoListElement.innerHTML += promoHtml;
        });
    }

    // --- 5. í•„í„°ë§ ë° ë Œë”ë§ í†µí•© í•¨ìˆ˜ ---
    function filterAndRenderPromos() {
        let filteredPromos = [...allPromos]; // ì „ì²´ ëª©ë¡ ë³µì‚¬
        const searchTerm = searchInput.value.toLowerCase().trim(); // ê²€ìƒ‰ì–´

        // 1. ê²€ìƒ‰ì–´ í•„í„°ë§
        if (searchTerm) {
            filteredPromos = filteredPromos.filter(promo => 
                (promo.title && promo.title.toLowerCase().includes(searchTerm)) ||
                (promo.content && promo.content.toLowerCase().includes(searchTerm)) ||
                (promo.name && promo.name.toLowerCase().includes(searchTerm))
            );
        }
        
        // 2. ì •ë ¬
        const sortedPromos = sortPromos(filteredPromos);
        
        // 3. í™”ë©´ì— í‘œì‹œ
        renderPromos(sortedPromos);
    }
    
    // --- 6. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ---
    searchInput.addEventListener('input', filterAndRenderPromos); // ê²€ìƒ‰ì–´ ì…ë ¥ ì‹œ
    sortSelect.addEventListener('change', filterAndRenderPromos); // ì •ë ¬ ê¸°ì¤€ ë³€ê²½ ì‹œ

    // --- 7. ì´ˆê¸° ì‹¤í–‰ ---
    fetchPromos();
</script>
